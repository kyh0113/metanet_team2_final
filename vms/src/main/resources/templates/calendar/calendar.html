<!DOCTYPE html>
<html lang='en'>

<head>
	<meta charset='utf-8' />
	<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/@fullcalendar/common/main.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/common/main.js"></script>
	<script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
	<script src="https://unpkg.com/tippy.js@6.3.1/dist/tippy-bundle.umd.min.js"></script>
	<script>

		//document.addEventListener('DOMContentLoaded', function() {
		//var calendarEl = document.getElementById('calendar');
		//var calendar = new FullCalendar.Calendar(calendarEl, {
		//initialView: 'dayGridMonth'
		//});
		//calendar.render();
		//});
		document.addEventListener('DOMContentLoaded', function () {
			$(function () {
				var request = $.ajax({
					url: "/calendar/calendar-admin", // 변경하기
					method: "GET",
					dataType: "json"
				});

				request.done(function (data) {
					console.log(data); // log 로 데이터 찍어주기.

					var calendarEl = document.getElementById('calendar');

					var calendar = new FullCalendar.Calendar(calendarEl, {
						//initialDate: '2022-02-07',
						initialView: 'dayGridMonth',
						headerToolbar: {
							left: 'prev,next today',
							center: 'title',
							right: 'dayGridMonth'
						},
						editable: true,
						droppable: true, // this allows things to be dropped onto the calendar
						drop: function (arg) {
							// is the "remove after drop" checkbox checked?
							if (document.getElementById('drop-remove').checked) {
								// if so, remove the element from the "Draggable Events" list
								arg.draggedEl.parentNode.removeChild(arg.draggedEl);
							}
						},
						//eventMouseEnter: function (arg) {
						//	insertModalOpen("눌렀어?");
						//},

						eventDidMount: function (info) {
							tippy(info.el, {
								content: "<strong>제목:</strong>"+info.event.title+"<hr>"+
								"시작날짜: "+info.event.start+"<br>"
								+"종료날짜ss: "+1,
								placement: 'bottom',
								trigger: 'mouseenter',
								allowHTML: true,
							});
							console.log(typeof(info.event.end));
						},
						events: data
					});
					

					calendar.render();
				});


				request.fail(function (jqXHR, textStatus) {
					alert("Request failed: " + textStatus);
				});
			});

		});

	</script>
</head>

<body>
	<div id='calendar'></div>
</body>

</html>