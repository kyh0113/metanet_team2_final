<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>메인 페이지</title>
    <style>
        .clipBoard {
            border: 1px solid #000000;
            border-radius: 15px;
            display: inline-block;
            padding: 10px;
            color: #252C58;
            box-sizing: border-box;
            padding: 20px;
        }
        .todayTime {
			font-size: 24px;
			font-weight: 300;
			line-height: 30px;
			opacity: 0.5;
		}
		.todayDateBody, .todayDateTitle {
			font-size: 18px;
			font-weight: 300;
		}
		.infoCount {
			font-size: 38;
			font-weight: 600;
		}
		.infoLabel {
			font-size: 16;
			font-weight:300;
		}
		.infoButton {
			margin-left: 15px;
		}
    </style>
</head>
<body>
    <div id="todoayInfo" class="clipBoard">
		<p class="todayDateTitle">오늘의 날짜 </p>
        <p class="todayDateBody"></p>
        <p class="todayTime"></p>
    </div>
    <div id="myCertificateInfo" class="clipBoard">
		<div class="infoTop">
			<p class="infoCountLabel">2<button class="infoButton">증명서버튼</button></p>
		</div>
        <p class="infoLabel">나의 증명서</p>
    </div>
    <div id="myCertificateInfo" class="clipBoard">
		<div class="infoTop">
			<p class="infoCountLabel">30<button class="infoButton">결재 버튼</button></p>
		</div>
        <p class="infoLabel">내가 결제해야할 문서</p>
    </div>
    <div id="myCertificateInfo" class="clipBoard">
		<div class="infoTop">
			<p class="infoCountLabel">10<button class="infoButton">남은 휴가 일수</button></p>
		</div>
        <p class="infoLabel">나의 휴가 정보</p>
    </div>
<!-- 그래프를 그릴 canvas 요소 -->
<canvas id="myChart" width="400" height="200"></canvas>

<script th:inline="javascript">
    /*<![CDATA[*/
    // 데이터 정의
    var data = {
        labels: ['1월', '2월', '3월', '4월', '5월', '6월'],
        datasets: [{
        label: '월별 사용 휴가 일수',
        data: [10, 25, 15, 30, 20, 35], // 각 막대의 높이
        backgroundColor: 'rgba(75, 192, 192, 0.2)', // 막대 색상
        borderColor: 'rgba(75, 192, 192, 1)', // 막대 테두리 색상
        borderWidth: 1 // 막대 테두리 너비
        }]
    };

    // 차트 옵션 정의
    var options = {
        scales: {
        y: {
            beginAtZero: true
        }
        }
    };

    // 막대 그래프 생성
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: data,
        options: options
    });

    function updateDateTime() {
        var todayDateBodyTag = document.querySelector('.todayDateBody');
        var now = new Date();

        var year = now.getFullYear();
        var month = ('0' + (now.getMonth() + 1)).slice(-2);
        var day = ('0' + now.getDate()).slice(-2);
        var dayOfWeek = getDayOfWeek(now.getDay());

        todayDateBodyTag.innerHTML = year + '년 ' + month + '월 ' + day + '일 (' + dayOfWeek + ')';
    }   

    function getDayOfWeek(dayIndex) {
        var daysOfWeek = ['일', '월', '화', '수', '목', '금', '토'];
        return daysOfWeek[dayIndex];
    }

    function updateClock() {
        var todayTimeTag = document.querySelector('.todayTime');
        var now = new Date();
        var hours = ('0' + now.getHours()).slice(-2);
        var minutes = ('0' + now.getMinutes()).slice(-2);
        var seconds = ('0' + now.getSeconds()).slice(-2);

        todayTimeTag.innerHTML = hours + ':' + minutes + ':' + seconds;

        updateDateTime(); // 시간이 업데이트될 때마다 날짜와 요일도 함께 업데이트
    }

    function viewDidLoad() {
        updateClock(); // 페이지 로드시 한번 호출
        setInterval(updateClock, 1000); // 1초마다 업데이트
    }
	viewDidLoad()
    /*]]>*/
    </script>
</body>
</html>